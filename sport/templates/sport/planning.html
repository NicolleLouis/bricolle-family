{% extends 'sport/base.html' %}

{% block title %}Planification des entraînements{% endblock %}

{% block content %}
<div class="py-4">
    <h1 class="mb-4">Planifier des sessions</h1>
    <form method="post" class="card p-4 shadow-sm mb-4">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label" for="{{ form.training.id_for_label }}">{{ form.training.label }}</label>
                {{ form.training }}
                {{ form.training.errors }}
            </div>
            <div class="col-md-6">
                <label class="form-label" for="{{ form.weekday.id_for_label }}">{{ form.weekday.label }}</label>
                {{ form.weekday }}
                {{ form.weekday.errors }}
            </div>
            <div class="col-md-6">
                <label class="form-label" for="{{ form.start_date.id_for_label }}">{{ form.start_date.label }}</label>
                {{ form.start_date }}
                {{ form.start_date.errors }}
            </div>
            <div class="col-md-6">
                <label class="form-label" for="{{ form.weeks_count.id_for_label }}">{{ form.weeks_count.label }}</label>
                {{ form.weeks_count }}
                {{ form.weeks_count.errors }}
            </div>
        </div>
        <div class="mt-4">
            <button type="submit" class="btn btn-primary">Planifier</button>
            <a class="btn btn-outline-secondary" href="{% url 'sport:home' %}">Retour au calendrier</a>
        </div>
    </form>

    {% if created_sessions %}
        <div class="alert alert-success">
            <h2 class="h5">Sessions créées</h2>
            <ul class="mb-0">
                {% for session in created_sessions %}
                    <li>{{ session.date|date:"d/m/Y" }} — {{ session.training.name }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {% if skipped_dates %}
        <div class="alert alert-warning mt-3">
            <h2 class="h6">Déjà existantes (non recréées)</h2>
            <ul class="mb-0">
                {% for date in skipped_dates %}
                    <li>{{ date|date:"d/m/Y" }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
</div>
{% endblock %}
